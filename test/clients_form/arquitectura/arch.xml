<form string="Partners">
                <div class="alert alert-warning oe_edit_only" role="alert" name="warning_tax" invisible="not same_vat_partner_id">
                  A partner with the same <span><field name="vat_label"/>
                <field name="partner_gid" invisible="True"/>
                <field name="additional_info" invisible="True"/></span> already exists (<field name="same_vat_partner_id" context="{'show_address': False, 'show_vat': False}"/>), are you sure you want to create a new one?
                </div>
                <div class="alert alert-warning oe_edit_only" role="alert" name="warning_company" invisible="not same_company_registry_partner_id">
                  A partner with the same <span><field name="company_registry_label"/></span> already exists (<field name="same_company_registry_partner_id" context="{'show_address': False, 'show_vat': False}"/>), are you sure you want to create a new one?
                </div>
                    <div class="alert alert-warning" role="alert" invisible="duplicated_bank_account_partners_count == 0">
                        One or more Bank Accounts set on this partner are also used by other <bold><button class="alert-link" type="object" name="action_view_partner_with_same_bank" role="button" string="Partners" style="padding: 0;vertical-align: baseline;"/></bold>. Please make sure that this is a wanted behavior.
                    </div>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="schedule_meeting" icon="fa-calendar" context="{'partner_id': id, 'partner_name': name}">
                            <field string="Meetings" name="meeting_count" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button o_res_partner_tip_opp" type="object" name="action_view_opportunity" icon="fa-star" context="{'default_partner_id': id, 'default_type':'opportunity'}">
                            <field string="Opportunities" name="opportunity_count" widget="statinfo"/>
                        </button>
                <button class="oe_stat_button" type="object" name="action_view_sale_order" icon="fa-usd">
                    <field string="Sales" name="sale_order_count" widget="statinfo"/>
                </button>
                    <button type="object" class="oe_stat_button" icon="fa-pencil-square-o" name="action_view_partner_invoices" context="{'default_partner_id': id}">
                        <div class="o_form_field o_stat_info">
                            <span class="o_stat_value">
                                <field name="currency_id" invisible="1"/>
                                <field name="total_invoiced" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </span>
                            <span class="o_stat_text">Invoiced</span>
                        </div>
                    </button>
                    <button class="oe_stat_button" type="action" name="287" icon="fa-pencil-square-o" help="Vendor Bills" invisible="supplier_invoice_count == 0">
                        <field string="Vendor Bills" name="supplier_invoice_count" widget="statinfo"/>
                    </button>
                <button type="action" class="oe_stat_button" icon="fa-credit-card-alt" name="218" context="{'search_default_partner_id': id, 'create': False, 'edit': False}" invisible="payment_token_count == 0">
                    <div class="o_form_field o_stat_info">
                        <span class="o_stat_value">
                            <field name="payment_token_count" widget="statinfo" nolabel="1"/>
                        </span>
                        <span class="o_stat_text">Saved Payment Methods</span>
                    </div>
                </button>
                <button name="action_open_employees" type="object" class="oe_stat_button" icon="fa-id-card-o" invisible="employees_count == 0">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="employees_count"/></span>
                        <span class="o_stat_text">Employee</span>
                    </div>
                </button></div>
                    <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                    <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}" on_change="1"/>
                    <div class="oe_title mb24">
                        <field name="company_type" widget="radio" options="{'horizontal': true}" on_change="1"/>
                        <h1>
                            <field id="company" options="{'line_breaks': False}" widget="field_partner_autocomplete" class="text-break" name="name" default_focus="1" placeholder="e.g. Lumber Inc" invisible="not is_company" required="type == 'contact'" on_change="1"/>
                            <field id="individual" options="{'line_breaks': False}" widget="field_partner_autocomplete" class="text-break" name="name" default_focus="1" placeholder="e.g. Brandon Freeman" invisible="is_company" required="type == 'contact'" on_change="1"/>
                        </h1>
                        <div class="o_row">
                            <field name="parent_id" widget="res_partner_many2one" placeholder="Company Name..." domain="[('is_company', '=', True)]" context="{'default_is_company': True, 'show_vat': True, 'default_user_id': user_id}" invisible="((is_company and not parent_id) or company_name) and company_name != ''" on_change="1" can_create="True" can_write="True"/>
                                <field name="company_name" invisible="not company_name or company_name == '' or is_company"/>
                                <button name="create_company" icon="fa-plus-square" string="Create company" type="object" class="oe_edit_only btn-link" invisible="is_company or company_name == '' or not company_name"/>
                        </div>
                    </div>

                    <group>
                        <group>
                            <span class="o_form_label o_td_label o_address_type" name="address_name">
                                <field name="type" invisible="1" on_change="1"/>
                                <span invisible="not is_company">Address</span>
                            </span>
                            <div class="o_address_format">
                                <field name="street" placeholder="Street..." class="o_address_street" readonly="type == 'contact' and parent_id"/>
                                <field name="street2" placeholder="Street 2..." class="o_address_street" readonly="type == 'contact' and parent_id"/>
                                <field name="city" placeholder="City" class="o_address_city" readonly="type == 'contact' and parent_id"/><field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" readonly="type == 'contact' and parent_id" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}" on_change="1" can_create="True" can_write="True"/><field name="zip" placeholder="ZIP" class="o_address_zip" readonly="type == 'contact' and parent_id" on_change="1"/>
                                
                                
                                <div name="partner_address_country" class="d-flex justify-content-between">
                                    <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" readonly="type == 'contact' and parent_id" on_change="1" can_create="True" can_write="True"/>
                                </div>
                            </div>
                    <field name="partner_vat_placeholder" invisible="1"/> <!-- Needed for the placeholder widget -->
                            
                    <field name="perform_vies_validation" invisible="1"/>
                    <label for="l10n_latam_identification_type_id" string="Identification Number"/>
            <div name="vat_vies_container">
                    <field name="l10n_latam_identification_type_id" options="{'no_open': True, 'no_create': True}" placeholder="Type" class="oe_inline" domain="country_id and ['|', ('country_id', '=', False), ('country_id', '=', country_id)] or []" required="True" readonly="parent_id" can_create="False" can_write="True"/>
                <span class="oe_read_only"> - </span>
                <field name="vat" placeholder="Number" class="oe_inline" readonly="parent_id" string="NIT" widget="field_partner_autocomplete" on_change="1"/>
            <span class="text-nowrap ps-2">
                        <label for="vies_valid" invisible="not perform_vies_validation"/>
                        <field name="vies_valid" invisible="not perform_vies_validation" class="oe_inline"/>
                    </span></div>
                        </group>
                        <group>
                            <field name="function" placeholder="e.g. Sales Director" invisible="is_company"/>
                            <field name="phone_blacklisted" invisible="1"/>
                <field name="mobile_blacklisted" invisible="1"/>
                <label for="phone" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger" title="This phone number is blacklisted for SMS Marketing. Click to unblacklist." type="object" context="{'default_phone': phone}" invisible="not phone_blacklisted"/>
                    <field name="phone" widget="phone" on_change="1"/>
                </div>
            <field name="phone_blacklisted" invisible="1"/>
                <field name="mobile_blacklisted" invisible="1"/>
                <label for="mobile" class="oe_inline"/>
                <div class="o_row o_row_readonly">
                    <button name="phone_action_blacklist_remove" class="fa fa-ban text-danger" title="This phone number is blacklisted for SMS Marketing. Click to unblacklist." type="object" context="{'default_phone': mobile}" invisible="not mobile_blacklisted"/>
                    <field name="mobile" widget="phone" on_change="1"/>
                </div>
            <field name="phone_sanitized" invisible="1" on_change="1"/>
                            <field name="is_blacklisted" invisible="1"/>
                    <label for="email" class="oe_inline"/>
                    <div class="o_row o_row_readonly">
                        <button name="mail_action_blacklist_remove" class="fa fa-ban text-danger" title="This email is blacklisted for mass mailings. Click to unblacklist." type="object" context="{'default_email': email}" invisible="not is_blacklisted"/>
                        <field name="email" widget="email" context="{'gravatar_image': True}" required="user_ids" on_change="1"/>
                    </div>
                <field name="website" string="Website" widget="url" placeholder="e.g. https://www.odoo.com"/>
                            <field name="title" options="{&quot;no_open&quot;: True}" placeholder="e.g. Mister" invisible="is_company" can_create="True" can_write="True"/>
                            <field name="lang" invisible="active_lang_count &lt;= 1" on_change="1"/>
                            <field name="category_id" widget="many2many_tags" options="{'color_field': 'color'}" placeholder="e.g. &quot;B2B&quot;, &quot;VIP&quot;, &quot;Consulting&quot;, ..." can_create="True" can_write="True"/>
                        </group>
                    </group>

                    <notebook colspan="4">
                        <page string="Contacts &amp; Addresses" name="contact_addresses" autofocus="autofocus">
                            <field name="child_ids" mode="kanban" context="{'default_parent_id': id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_lang': lang, 'default_user_id': user_id, 'default_type': 'other'}">
                                <kanban color="color">
                                    <field name="color"/>
                                    <field name="type" invisible="1" on_change="1"/>
                                    <field name="is_company" on_change="1"/>
                                    <templates>
                                        <t t-name="card" class="flex-row">
                                            <aside class="o_kanban_aside_full">
                                                <field name="avatar_128" class="o_kanban_image_fill w-100" widget="image" options="{'img_class': 'object-fit-cover'}" alt="Contact image"/>
                                            </aside>
                                            <main class="ps-2 ps-md-0">
                                                <field name="name" class="fw-bold" widget="field_partner_autocomplete" on_change="1"/>
                                                <field name="function"/>
                                                <field name="email" widget="email" on_change="1"/>
                                                <div t-if="record.type.raw_value != 'contact'">
                                                    <div>
                                                        <field class="me-1" name="zip" on_change="1"/>
                                                        <field name="city"/>
                                                    </div>
                                                    <field class="me-1" name="state_id" on_change="1"/>
                                                    <field name="country_id" on_change="1"/>
                                                </div>
                                                <div t-if="record.phone.raw_value">Phone: <field name="phone" on_change="1"/></div>
                                                <div t-if="record.mobile.raw_value">Mobile: <field name="mobile" on_change="1"/></div>
                                            </main>
                                        </t>
                                    </templates>
                                </kanban>
                                <form string="Contact / Address">
                                    <sheet>
                                        <field name="type" required="1" widget="radio" options="{'horizontal': true}" on_change="1"/>
                                        <div class="text-muted oe_edit_only">
                                            <p class="mb-0" invisible="type != 'contact'">
                                                <span>Use this to organize the contact details of employees of a given company (e.g. CEO, CFO, ...).</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'invoice'">
                                                <span>Preferred address for all invoices. Selected by default when you invoice an order that belongs to this company.</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'delivery'">
                                                <span>Preferred address for all deliveries. Selected by default when you deliver an order that belongs to this company.</span>
                                            </p>
                                            <p class="mb-0" invisible="type != 'other'">
                                                <span>Other address for the company (e.g. subsidiary, ...)</span>
                                            </p>
                                        </div>
                                        <hr/>
                                        <group>
                                            <group>
                                                <field name="name" string="Contact Name" required="type == 'contact'" placeholder="e.g. New Address" widget="field_partner_autocomplete" on_change="1"/>
                                                <field name="title" options="{'no_open': True}" placeholder="e.g. Mr." invisible="type != 'contact'" can_create="True" can_write="True"/>
                                                <field name="function" placeholder="e.g. Sales Director" invisible="type != 'contact'"/>
                                                <label for="street" string="Address" invisible="type == 'contact'"/>
                                                <div invisible="type == 'contact'">
                                                    <div class="o_address_format" name="div_address">
                                                        <field name="street" placeholder="Street..." class="o_address_street"/>
                                                        <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                                        <field name="city" placeholder="City" class="o_address_city"/><field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}" on_change="1" can_create="True" can_write="True"/><field name="zip" placeholder="ZIP" class="o_address_zip" on_change="1"/>
                                                        
                                                        
                                                        <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" on_change="1" can_create="True" can_write="True"/>
                                                    </div>
                                                </div>
                                            </group>
                                            <group>
                                                <field name="email" widget="email" on_change="1"/>
                                                <field name="phone" widget="phone" on_change="1"/>
                                                <field name="mobile" widget="phone" on_change="1"/>
                                                <field name="company_id" invisible="1" on_change="1" can_create="True" can_write="True"/>
                    <field name="fiscal_country_codes" invisible="1"/>    <!-- Need to save value from parented record, cf onchange -->
                                            </group>
                                        </group>
                                        <group>
                                            <field name="comment" placeholder="Internal notes..." nolabel="1"/>
                                        </group>
                                        <field name="lang" invisible="True" on_change="1"/>  <!-- Need to add lang to save default value from parented record -->
                                    </sheet>
                                </form>
                            </field>
                        </page>
                        <page name="sales_purchases" string="Sales &amp; Purchase">
                            <group name="container_row_2">
                                <group string="Sales" name="sale" priority="1">
                                    <field name="user_id" widget="many2one_avatar_user" domain="[('share', '=', False)]" can_create="True" can_write="True"/>
                    <field string="Payment Terms" name="property_payment_term_id" options="{'no_open': True, 'no_create': True}" can_create="True" can_write="True"/>
                    <field string="Payment Method" name="property_inbound_payment_method_line_id" options="{'no_open': True, 'no_create': True}" can_create="True" can_write="True"/>
                    </group>
                                <group string="Purchase" name="purchase" priority="2">
                    <field string="Payment Terms" name="property_supplier_payment_term_id" options="{'no_open': True, 'no_create': True}" can_create="True" can_write="True"/>
                    <field string="Payment Method" name="property_outbound_payment_method_line_id" options="{'no_open': True, 'no_create': True}" can_create="True" can_write="True"/>
                                </group>
                    <group string="Fiscal Information" name="fiscal_information" priority="5">
                        <field name="property_account_position_id" options="{'no_create': True, 'no_open': True}" can_create="True" can_write="True"/>
                    </group>
                                <group name="misc" string="Misc">
                    <field name="partner_company_registry_placeholder" invisible="1"/> <!-- Needed for the placeholder widget -->
                                    <field name="company_registry" invisible="parent_id" options="{'placeholder_field': 'partner_company_registry_placeholder'}" on_change="1"/>
                                    <field name="ref" string="Reference"/>
                                    <field name="company_id" invisible="1" on_change="1" can_create="True" can_write="True"/> <!-- need to be able to to compute based on the company even without multi company groups -->
                                    <field name="industry_id" invisible="not is_company" options="{'no_create': True}" can_create="True" can_write="True"/>
                                </group>
                    <group name="container_row_stock" priority="6">
                        <group string="Inventory" name="inventory" colspan="2">
                            <field name="property_stock_customer" can_create="True" can_write="True"/>
                            <field name="property_stock_supplier" can_create="True" can_write="True"/>
                        </group>
                    </group>
                            </group>
        <group string="Fiscal">
          <field name="x_tax_regime_id" can_create="True" can_write="True"><list>
        <field name="name"/>
        <field name="code"/>
        <field name="tax_ids"/>
      </list></field>
        </group>
                        </page>
                    <page string="Invoicing" name="accounting" invisible="not is_company and parent_id">
                        <field name="duplicated_bank_account_partners_count" invisible="1"/>
                        <field name="show_credit_limit" invisible="1"/>
                        <group>
                            <group string="Bank Accounts" name="banks">
                                <field name="bank_ids" nolabel="1" context="{'default_partner_id': id}" widget="auto_save_res_partner" on_change="1">
                                    <list>
                                        <field name="sequence" widget="handle"/>
                                        <field name="acc_number"/>
                                        <field name="bank_id"/>
                                        <field name="allow_out_payment"/>
                                        <field name="acc_holder_name" column_invisible="True"/>
                                    </list>
                                </field>
                            </group>
                            <group id="invoice_send_settings" string="Customer Invoices">
                                <field name="invoice_sending_method"/>
                                <field name="invoice_edi_format" placeholder="XML format" invisible="not display_invoice_edi_format"/>
                                <field name="invoice_template_pdf_report_id" invisible="not display_invoice_template_pdf_report_id" options="{'no_create': True, 'no_edit': True}" can_create="True" can_write="True"/>
                <label for="peppol_eas" string="Peppol Address" invisible="1"/> <!-- TODO remove in master -->
                <div id="peppol_address" class="row" invisible="1"/> <!-- TODO remove in master -->
                <field name="peppol_eas" placeholder="Peppol ID" nolabel="1" class="o_field_peppol_eas_selection" on_change="1"/>
                <field name="peppol_endpoint" nolabel="1" placeholder="Your endpoint"/>
                            </group>
                            <group string="Credit Limits" name="credit_limits" invisible="not show_credit_limit">
                                <field name="credit" on_change="1"/>
                                <field name="days_sales_outstanding"/>
                                <label for="use_partner_credit_limit"/>
                                <div class="o_row">
                                    <field name="use_partner_credit_limit"/>
                                    <field name="credit_limit" class="oe_inline" widget="monetary" options="{'currency_field': 'currency_id'}" invisible="not use_partner_credit_limit"/>
                                </div>
                            </group>
                            <group name="accounting_automation" string="Automation">
                                <field name="autopost_bills"/>
                                <field name="ignore_abnormal_invoice_amount"/>
                                <field name="ignore_abnormal_invoice_date"/>
                            </group>
                        </group>
                    </page>
                    <page string="Invoicing" name="accounting_disabled" invisible="is_company or not parent_id">
                        <div>
                            <p>Accounting-related settings are managed on <button name="open_commercial_entity" type="object" string="the parent company" class="oe_link"/></p>
                        </div>
                    </page>
                        <page name="internal_notes" string="Internal Notes">
                            <field name="comment" placeholder="Internal notes..."/>
                <group>
                    </group>
                    <group>
                        </group>
                </page>
                    </notebook>
                </sheet>
                    <chatter/>
                <field name="active" invisible="True" readonly="True" data-used-by="invisible='active' (widget,web_ribbon)" on_change="1"/>
<field name="is_company" invisible="True" readonly="True" data-used-by="invisible='not is_company' (field,industry_id); required='not is_company' (field,type); invisible='is_company or not parent_id' (div,parent_pricelists); invisible='is_company or not parent_id' (page,accounting_disabled)" on_change="1"/>
<field name="user_ids" invisible="True" readonly="True" data-used-by="readonly='user_ids' (field,type); required='user_ids' (field,email)" on_change="1"/>
<field name="active_lang_count" invisible="True" readonly="True" data-used-by="invisible='active_lang_count &lt;= 1' (field,lang)"/>
<field name="display_invoice_edi_format" invisible="True" readonly="True" data-used-by="invisible='not display_invoice_edi_format' (field,invoice_edi_format)"/>
<field name="display_invoice_template_pdf_report_id" invisible="True" readonly="True" data-used-by="invisible='not display_invoice_template_pdf_report_id' (field,invoice_template_pdf_report_id)"/>
</form>